
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial‚Äëscale=1" />
  <title>‡πÄ‡∏Å‡∏°‡∏Ñ‡∏ì‡∏¥‡∏ï ‡∏°.1</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family:'Kanit'; margin:0; padding:0; min-height:100vh; background:#e0f7fa; display:flex; align-items:center; justify-content:center; }
    .screen { position:absolute; top:0; left:0; width:100%; height:100%; padding:20px; box-sizing:border-box; display:flex; flex-direction:column; align-items:center; justify-content:center; transition:opacity .5s ease; }
    .hidden { opacity:0; pointer-events:none; }
    h1 { font-size:3rem; color:#0288d1; margin-bottom:20px; }
    button { font-size:1.5rem; padding:15px 30px; margin:10px; border:none; border-radius:30px; background:linear-gradient(to right,#00bcd4,#2196f3); color:#fff; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.2); transition:0.3s; }
    button:hover { background:linear-gradient(to right,#0288d1,#1976d2); }
    .game‚Äëcontainer { max-width:800px; width:100%; background:rgba(255,255,255,0.95); border-radius:25px; padding:20px; text-align:center; box-shadow:0 8px 30px rgba(0,0,0,0.15); }
    .info { margin:10px 0; font-size:1.2rem; color:#e91e63; }
    .question { font-size:2rem; margin:20px 0; color:#444; }
    input { font-size:1.5rem; padding:10px; border:2px solid #ccc; border-radius:10px; width:60%; text-align:center; }
    .logo-spin {
      width: 160px;
      margin-bottom: 20px;
      animation: spinLogo 2s ease-in-out;
    }
    @keyframes spinLogo {
      0% { transform: rotate(0deg) scale(0.5); opacity: 0; }
      50% { transform: rotate(360deg) scale(1.2); opacity: 1; }
      100% { transform: rotate(360deg) scale(1); opacity: 1; }
    }
  </style>
</head>
<body>

  <!-- Intro Screen -->
    <div id="intro" class="screen">
       <img src="logo.png" alt="Math Game Logo" class="logo-spin">
        <h1>‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏ì‡∏¥‡∏ï ‡∏°.1</h1>
        <button onclick="showMode()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
    </div>

  <!-- Mode Selection Screen -->
  <div id="mode" class="screen hidden">
    <h1>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</h1>
    <button onclick="startGame('easy')">‡∏á‡πà‡∏≤‡∏¢</button>
    <button onclick="startGame('medium')">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</button>
    <button onclick="startGame('hard')">‡∏¢‡∏≤‡∏Å</button>
  </div>

  <!-- Game Screen -->
  <div id="game" class="screen hidden">
    <div class="game‚Äëcontainer">
      <div class="info">‚è∞‡πÄ‡∏ß‡∏•‡∏≤: <span id="time">20</span> ‡∏ß‡∏¥</div>
      <div id="warning" class="info" style="display:none;color:red;">‡∏£‡∏µ‡∏ö‡∏ï‡∏≠‡∏ö‡∏ô‡∏∞!</div>
      <div class="info">‚≠ê‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></div>
      <div class="info">‚ùì‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà: <span id="questionNumber">1</span>/20</div>
      <div class="question" id="question"></div>
      <input type="text" id="answer" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Enter" />
    </div>
  </div>

  <!-- Result Screen -->
  <div id="result" class="screen hidden">
    <h1>üéâ ‡∏à‡∏ö‡πÄ‡∏Å‡∏°!</h1>
    <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span id="finalScore"></span></p>
    <button onclick="location.reload()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
  </div>

  <audio id="correctSound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
  <audio id="wrongSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

  <script>
    const screens = { intro: document.getElementById('intro'), mode: document.getElementById('mode'), game: document.getElementById('game'), result: document.getElementById('result') };
    let difficulty, score=0, questionCount=0, wrongAnswer=0, timer, timeLeft, correctAnswer;

    function showMode() {
      screens.intro.classList.add('hidden');
      screens.mode.classList.remove('hidden');
    }

    function startGame(mode) {
      difficulty=mode; score=0; questionCount=0; wrongAnswer=0;
      screens.mode.classList.add('hidden');
      screens.game.classList.remove('hidden');
      generateQuestion();
    }

    function startQuestionTimer(){
      clearInterval(timer);
      timeLeft=20; document.getElementById('time').textContent = timeLeft;
      document.getElementById('warning').style.display='none';
      timer = setInterval(() => {
        timeLeft--; document.getElementById('time').textContent = timeLeft;
        if(timeLeft===5) document.getElementById('warning').style.display='block';
        if(timeLeft<=0){ clearInterval(timer);
          wrongAnswer++; nextQuestion();
        }
      },1000);
    }

    function generateQuestion(){
      questionCount++; document.getElementById('questionNumber').textContent = questionCount;
      let q='', a,b;
      if(difficulty==='easy'){
        const type = Math.random()<0.5?'plus':'power';
        if(type==='plus'){ a=randomInt(0,50); b=randomInt(0,50); correctAnswer=a+b; q=`${a}+${b} = ?`; }
        else{ a=randomInt(2,7); b=randomInt(2,3); correctAnswer=Math.pow(a,b); q=`${a}^${b} = ?`; }
      } else if(difficulty==='medium'){
        if(Math.random()<0.5){
          a=(Math.random()*5+1).toFixed(1);
          b=(Math.random()*5+1).toFixed(1);
          correctAnswer=parseFloat((+a + +b).toFixed(1));
          q=`${a} + ${b} = ?`;
        } else {
          const n1=randomInt(1,4), d1=randomInt(1,4), n2=randomInt(1,4), d2=randomInt(1,4);
          const v1=n1/d1, v2=n2/d2;
          correctAnswer=parseFloat((v1+v2).toFixed(2));
          q=`${n1}/${d1} + ${n2}/${d2} = ?`;
        }
      } else {
        a=randomInt(1,10); b=randomInt(1,10);
        if(Math.random()<0.5){ correctAnswer = a*b; q=`${a} √ó ${b} = ?`;}
        else { correctAnswer = a; q=`${a*b} √∑ ${b} = ?`; }
      }
      document.getElementById('question').textContent = q;
      document.getElementById('score').textContent = score;
      document.getElementById('answer').value = '';
      document.getElementById('answer').focus();
      startQuestionTimer();
    }

    document.getElementById('answer').addEventListener('keydown', e=>{
      if(e.key==='Enter'){
        clearInterval(timer);
        const ua = parseFloat(e.target.value);
        if(Math.abs(ua-correctAnswer)<0.01){
          score++; document.getElementById('score').textContent = score;
          document.getElementById('correctSound').play();
        }else{ wrongAnswer++; document.getElementById('wrongSound').play(); }
        nextQuestion();
      }
    });

    function nextQuestion(){
      if(questionCount>=20){ endGame(); }
      else generateQuestion();
    }

    function endGame(){
      screens.game.classList.add('hidden');
      screens.result.classList.remove('hidden');
      document.getElementById('finalScore').textContent = score;
    }

    function randomInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
  </script>
</body>
</html>
